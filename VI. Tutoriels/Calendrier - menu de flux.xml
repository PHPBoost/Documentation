<?xml version="1.0" encoding="iso-8859-1"?>
<wiki_article>
  <wiki_id>302</wiki_id>
  <wiki_id_contents>1402</wiki_id_contents>
  <wiki_title>Calendrier - menu de flux</wiki_title>
  <wiki_encoded_title>calendrier-menu-de-flux</wiki_encoded_title>
  <wiki_hits>554</wiki_hits>
  <wiki_id_cat>54</wiki_id_cat>
  <wiki_is_cat>0</wiki_is_cat>
  <wiki_defined_status>0</wiki_defined_status>
  <wiki_undefined_status></wiki_undefined_status>
  <wiki_redirect>0</wiki_redirect>
  <wiki_auth></wiki_auth>
  <wiki_cat_id>54</wiki_cat_id>
  <wiki_cat_id_parent>0</wiki_cat_id_parent>
  <wiki_cat_article_id>192</wiki_cat_article_id>
  <wiki_con_id_contents>1402</wiki_con_id_contents>
  <wiki_con_id_article>302</wiki_con_id_article>
  <wiki_menu></wiki_menu>
  <wiki_activ>1</wiki_activ>
  <wiki_user_id>5083</wiki_user_id>
  <wiki_user_ip>90.16.59.222</wiki_user_ip>
  <wiki_timestamp>1425644820</wiki_timestamp>
  <wiki_content>Par défaut les menus de flux sont quasiment identiques et affichent les entrées d'un module dans l'ordre décroissant de création.

Je vous propose d'améliorer le menu de flux du module Calendrier afin d'obtenir un menu affichant les prochaines entrées dans un ordre croissant de rendez-vous.

[style=warning]ATTENTION: Toute modification d'un fichier php sera annulée par une mise à jour officielle du module correspondant - pensez à garder une copie de vos modifications[/style]

modification réalisée à partir de phpboost 4.1.2

[title=3]calendar/phpboost/CalendarFeedProvider.class.php[/title]

modification à partir de la ligne 66
[code=php]WHERE approved = 1
AND id_category IN :cats_ids
ORDER BY start_date DESC', array([/code] par [code=php]WHERE approved = 1
AND start_date &gt; ' . time() . '
AND id_category IN :cats_ids
ORDER BY start_date ASC', array([/code]

modification ligne [s]86[/s] 87 (après modification ci-dessus)
[code=php]$item-&gt;set_date($event-&gt;get_content()-&gt;get_creation_date());[/code] par [code=php]$item-&gt;set_date($event-&gt;get_start_date());[/code]

Résultat:
il faut bien sur creer un menu de flux : administration &gt; contenu &gt; menus =&gt; ajouter un menu =&gt; menu de flux =&gt; choisir : calendar/racine (ou une catégorie si vous en avez créé)
vous pouvez créer autant de menus que de catégories - par défaut la catégorie "racine" affiche les entrées de toutes les catégories.
[style=success]Affichage des événements dans l'ordre croissant, classé par date de rendez-vous au lieu de la date de création de l'événement[/style]

exemple pour des événements tous créés à la même date (09-09): [img]http://i.imgur.com/9mdFDQY.png[/img]

[style=warning]Pensez à vider le cache syndication pour mettre à jour les menus de flux existants.[/style]</wiki_content>
</wiki_article>